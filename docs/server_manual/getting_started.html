<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. 最初のステップ &mdash; QGIS Documentation  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/qgis_docs.css?v=01847ad1" />
      <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />

  
    <link rel="shortcut icon" href="../../_static/qgis_logo.ico"/>
    <link rel="canonical" href="https://docs.qgis.org/latest/en/docs/server_manual/getting_started.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=c033477b"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script src="../../_static/translations.js?v=4dbe4bdc"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="3. サービス" href="services.html" />
    <link rel="prev" title="1. はじめに" href="introduction.html" />
  <meta name="description" content="QGIS 3.40 documentation: 2. 最初のステップ">
  <script>
    var _paq = window._paq = window._paq || [];
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="//matomo.qgis.org/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '1']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
</head>

<body class="wy-body-for-nav">

  <nav class="release_status_topbar">
  </nav>

   

 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
   

          
          
          <a href="../index.html" class="icon icon-home">
            QGIS Documentation
              <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.40
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
   <a href= "../../genindex.html">索引</a>
 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">About QGIS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/preamble.html">はじめに</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/foreword.html">序文</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/conventions.html">表記規則</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/features.html">機能</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/help_and_support.html">ヘルプとサポート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/contributors.html">協力者</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/license/index.html">Complying with Licenses</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ユーザ向け</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user_manual/index.html">QGIS Desktop User Guide/Manual (QGIS 3.40)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">QGIS Server Guide/Manual (QGIS 3.40)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">1. はじめに</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2. 最初のステップ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation-on-debian-based-systems">2.1. Debian ベースのシステムへのインストール</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#apache-http-server">2.1.1. Apache HTTP サーバー</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nginx-http-server">2.1.2. NGINX HTTP Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#xvfb">2.1.3. Xvfb</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#installation-on-windows">2.2. Windowsへのインストール</a></li>
<li class="toctree-l3"><a class="reference internal" href="#serve-a-project">2.3. プロジェクトを供給する</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configure-your-project">2.4. プロジェクトを設定する</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#wms-capabilities">2.4.1. WMS機能</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wmts-capabilities">2.4.2. WMTS機能</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wfs-oapif-capabilities">2.4.3. WFS/OAPIF機能</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wcs-capabilities">2.4.4. WCS機能</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fine-tuning-your-ows">2.4.5. OWSを微調整する</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#integration-with-third-parties">2.5. サードパーティとの統合</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#integration-with-qgis-desktop">2.5.1. QGIS Desktopとの統合</a></li>
<li class="toctree-l4"><a class="reference internal" href="#integration-with-mapproxy">2.5.2. MapProxyとの統合</a></li>
<li class="toctree-l4"><a class="reference internal" href="#integration-with-qwc2">2.5.3. QWC2との統合</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="services.html">3. サービス</a></li>
<li class="toctree-l2"><a class="reference internal" href="catalog.html">4. カタログ</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html">5. プラグイン</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">6. 高度な構成</a></li>
<li class="toctree-l2"><a class="reference internal" href="development_server.html">7. 開発用サーバ</a></li>
<li class="toctree-l2"><a class="reference internal" href="containerized_deployment.html">8. コンテナによるデプロイメント</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html">9. よくある質問</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../training_manual/index.html">トレーニングマニュアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gentle_gis_introduction/index.html">やさしい GIS 入門</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ドキュメント執筆者向け</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../documentation_guidelines/index.html">ドキュメント作成のガイドライン</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">開発者向け</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pyqgis_developer_cookbook/index.html">PyQGIS Cookbook (QGIS 3.40)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers_guide/index.html">開発者ガイド</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QGIS Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">QGIS Server ガイド / マニュアル</a></li>
      <li class="breadcrumb-item active"><span class="section-number">2. </span>最初のステップ</li>

    <li style="float: right; text-align: right;">
	<ul>
		
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/qgis/QGIS-Documentation/blob/master/docs/server_manual/getting_started.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
	</ul>

        <!-- Add a button to guide potential contributors
	     To do: add a more generic page for contributing in QGIS docs to keep users in the same website
	     <a class="qgis-edit-guidelines" href="https://docs.qgis.org/3.40/ja/docs/documentation_guidelines/index.html">
	-->
	<a class="qgis-edit-guidelines" href="https://qgis.org/community/involve/">
		Learn how to contribute!
	</a>
    </li>


  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="introduction.html" class="btn btn-neutral float-left" title="1. はじめに" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="services.html" class="btn btn-neutral float-right" title="3. サービス" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <blockquote>
<div><div class="admonition important">
<p class="admonition-title">重要</p>
<p>翻訳は <a class="reference internal" href="../documentation_guidelines/do_translations.html#translation-guidelines"><span class="std std-ref">あなたが参加できる</span></a>  コミュニティの取り組みです。このページは現在 83.91% 翻訳されています。</p>
</div>
</div></blockquote>
<section id="getting-started">
<h1><span class="section-number">2. </span>最初のステップ<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h1>
<nav class="contents local" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#installation-on-debian-based-systems" id="id11">Debian ベースのシステムへのインストール</a></p>
<ul>
<li><p><a class="reference internal" href="#apache-http-server" id="id12">Apache HTTP サーバー</a></p></li>
<li><p><a class="reference internal" href="#nginx-http-server" id="id13">NGINX HTTP Server</a></p>
<ul>
<li><p><a class="reference internal" href="#nginx-configuration" id="id14">NGINXの設定</a></p></li>
<li><p><a class="reference internal" href="#fastcgi-wrappers" id="id15">FastCGIラッパー</a></p></li>
<li><p><a class="reference internal" href="#systemd" id="id16">Systemd</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#xvfb" id="id17">Xvfb</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#installation-on-windows" id="id18">Windowsへのインストール</a></p></li>
<li><p><a class="reference internal" href="#serve-a-project" id="id19">プロジェクトを供給する</a></p></li>
<li><p><a class="reference internal" href="#configure-your-project" id="id20">プロジェクトを設定する</a></p>
<ul>
<li><p><a class="reference internal" href="#wms-capabilities" id="id21">WMS機能</a></p></li>
<li><p><a class="reference internal" href="#wmts-capabilities" id="id22">WMTS機能</a></p></li>
<li><p><a class="reference internal" href="#wfs-oapif-capabilities" id="id23">WFS/OAPIF機能</a></p></li>
<li><p><a class="reference internal" href="#wcs-capabilities" id="id24">WCS機能</a></p></li>
<li><p><a class="reference internal" href="#fine-tuning-your-ows" id="id25">OWSを微調整する</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#integration-with-third-parties" id="id26">サードパーティとの統合</a></p>
<ul>
<li><p><a class="reference internal" href="#integration-with-qgis-desktop" id="id27">QGIS Desktopとの統合</a></p></li>
<li><p><a class="reference internal" href="#integration-with-mapproxy" id="id28">MapProxyとの統合</a></p></li>
<li><p><a class="reference internal" href="#integration-with-qwc2" id="id29">QWC2との統合</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="installation-on-debian-based-systems">
<h2><a class="toc-backref" href="#id11" role="doc-backlink"><span class="section-number">2.1. </span>Debian ベースのシステムへのインストール</a><a class="headerlink" href="#installation-on-debian-based-systems" title="Link to this heading"></a></h2>
<p id="index-0">ここでは (Ubuntuと派生ディストロを含む) Debian ベースのシステムにおいて最低限の動作をするようなインストール手順を短く簡単に紹介します。とはいえ、他の多くのディストロや OS も QGIS Server のためのパッケージを提供しています。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>Ubuntu では、管理者権限を必要とするコマンドの前に <code class="docutils literal notranslate"><span class="pre">sudo</span></code> を付けることで、そのコマンドを一般ユーザーとして使用することができます。Debian では、<code class="docutils literal notranslate"><span class="pre">sudo</span></code> を使用せず、管理者 (<code class="docutils literal notranslate"><span class="pre">root</span></code>) として作業することができます。</p>
</div>
<p>QGIS ServerをDebianベースのシステムにインストールするために、公式なQGISリポジトリを追加する要件と手順は、<a class="reference external" href="https://qgis.org/resources/installation-guide/#linux">QGISインストーラーページ</a> に記載されています。少なくとも最新のLong Term Releaseをインストールすることをおすすめします。</p>
<p>対象バージョンのレポジトリを設定し、QGIS Server をインストールできたなら、以下のファイルで正常にインストールされたことを確認できます。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/usr/lib/cgi-bin/qgis_mapserv.fcgi
</pre></div>
</div>
<p>下記のように出力されるなら、サーバは正常にインストールされたと言えます。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>QGIS のバージョンによっては、<code class="docutils literal notranslate"><span class="pre">qgis_mapserv.fcgi</span></code> を実行した時の出力はいくらか異なることがあります。</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QFSFileEngine</span><span class="p">::</span><span class="nb">open</span><span class="p">:</span> <span class="n">No</span> <span class="n">file</span> <span class="n">name</span> <span class="n">specified</span>
<span class="ne">Warning</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">driver</span> <span class="n">ECW</span> <span class="n">to</span> <span class="n">unload</span> <span class="kn">from</span> <span class="nn">GDAL_SKIP</span> <span class="n">environment</span> <span class="n">variable</span><span class="o">.</span>
<span class="ne">Warning</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">driver</span> <span class="n">ECW</span> <span class="n">to</span> <span class="n">unload</span> <span class="kn">from</span> <span class="nn">GDAL_SKIP</span> <span class="n">environment</span> <span class="n">variable</span><span class="o">.</span>
<span class="ne">Warning</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">driver</span> <span class="n">JP2ECW</span> <span class="n">to</span> <span class="n">unload</span> <span class="kn">from</span> <span class="nn">GDAL_SKIP</span> <span class="n">environment</span> <span class="n">variable</span><span class="o">.</span>
<span class="ne">Warning</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">driver</span> <span class="n">ECW</span> <span class="n">to</span> <span class="n">unload</span> <span class="kn">from</span> <span class="nn">GDAL_SKIP</span> <span class="n">environment</span> <span class="n">variable</span><span class="o">.</span>
<span class="ne">Warning</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">driver</span> <span class="n">JP2ECW</span> <span class="n">to</span> <span class="n">unload</span> <span class="kn">from</span> <span class="nn">GDAL_SKIP</span> <span class="n">environment</span> <span class="n">variable</span><span class="o">.</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">206</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">text</span><span class="o">/</span><span class="n">xml</span><span class="p">;</span> <span class="n">charset</span><span class="o">=</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span>

<span class="o">&lt;</span><span class="n">ServiceExceptionReport</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;1.3.0&quot;</span> <span class="n">xmlns</span><span class="o">=</span><span class="s2">&quot;https://www.opengis.net/ogc&quot;</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="n">ServiceException</span> <span class="n">code</span><span class="o">=</span><span class="s2">&quot;Service configuration error&quot;</span><span class="o">&gt;</span><span class="n">Service</span> <span class="n">unknown</span> <span class="ow">or</span> <span class="n">unsupported</span><span class="o">&lt;/</span><span class="n">ServiceException</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">ServiceExceptionReport</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>下記の場合は QGIS がステータス400というコードを返しており、有効な HTTP セッションが存在しないためにリクエストが失敗したことを正しく認識していることが分かります。これはバグではなく、サーバが適切に機能していることを示すものです。</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Application</span> <span class="n">path</span> <span class="ow">not</span> <span class="n">initialized</span>
<span class="n">Application</span> <span class="n">path</span> <span class="ow">not</span> <span class="n">initialized</span>
<span class="ne">Warning</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">driver</span> <span class="n">ECW</span> <span class="n">to</span> <span class="n">unload</span> <span class="kn">from</span> <span class="nn">GDAL_SKIP</span> <span class="n">environment</span> <span class="n">variable</span><span class="o">.</span>
<span class="ne">Warning</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">driver</span> <span class="n">ECW</span> <span class="n">to</span> <span class="n">unload</span> <span class="kn">from</span> <span class="nn">GDAL_SKIP</span> <span class="n">environment</span> <span class="n">variable</span><span class="o">.</span>
<span class="ne">Warning</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">driver</span> <span class="n">JP2ECW</span> <span class="n">to</span> <span class="n">unload</span> <span class="kn">from</span> <span class="nn">GDAL_SKIP</span> <span class="n">environment</span> <span class="n">variable</span><span class="o">.</span>
<span class="s2">&quot;Loading native module /usr/lib/qgis/server/libdummy.so&quot;</span>
<span class="s2">&quot;Loading native module /usr/lib/qgis/server/liblandingpage.so&quot;</span>
<span class="s2">&quot;Loading native module /usr/lib/qgis/server/libwcs.so&quot;</span>
<span class="s2">&quot;Loading native module /usr/lib/qgis/server/libwfs.so&quot;</span>
<span class="s2">&quot;Loading native module /usr/lib/qgis/server/libwfs3.so&quot;</span>
<span class="s2">&quot;Loading native module /usr/lib/qgis/server/libwms.so&quot;</span>
<span class="s2">&quot;Loading native module /usr/lib/qgis/server/libwmts.so&quot;</span>
<span class="n">QFSFileEngine</span><span class="p">::</span><span class="nb">open</span><span class="p">:</span> <span class="n">No</span> <span class="n">file</span> <span class="n">name</span> <span class="n">specified</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">102</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">application</span><span class="o">/</span><span class="n">json</span>
<span class="n">Server</span><span class="p">:</span>  <span class="n">QGIS</span> <span class="n">FCGI</span> <span class="n">server</span> <span class="o">-</span> <span class="n">QGIS</span> <span class="n">version</span> <span class="mf">3.40.0</span><span class="o">-</span><span class="n">Bratislava</span>
<span class="n">Status</span><span class="p">:</span>  <span class="mi">400</span>
<span class="p">[{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span><span class="s2">&quot;Bad request error&quot;</span><span class="p">,</span><span class="s2">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;Requested URI does not match any registered API handler&quot;</span><span class="p">}]</span>
</pre></div>
</div>
<p>サンプルプロジェクトを追加してみましょう。自作することもできますが、下記のように <a class="reference external" href="https://github.com/qgis/QGIS-Training-Data/">トレーニング用のデモデータ</a> を使用することもできます。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>/home/qgis/projects/
<span class="nb">cd</span><span class="w"> </span>/home/qgis/projects/
wget<span class="w"> </span>https://github.com/qgis/QGIS-Training-Data/archive/release_3.40.zip
unzip<span class="w"> </span>release_3.40.zip
mv<span class="w"> </span>QGIS-Training-Data-release_3.40/exercise_data/qgis-server-tutorial-data/world.qgs<span class="w"> </span>.
mv<span class="w"> </span>QGIS-Training-Data-release_3.40/exercise_data/qgis-server-tutorial-data/naturalearth.sqlite<span class="w"> </span>.
</pre></div>
</div>
<p>もちろん、お好きなGISソフトを使ってこのファイルを開き、設定や利用可能なレイヤを見ることもできます。</p>
<p>QGISサーバーを正しく配置するにはHTTPサーバーが必要です。推奨される選択肢は <a class="reference external" href="https://httpd.apache.org/docs/">Apache</a> または <a class="reference external" href="https://nginx.org/en/docs/">NGINX</a> です。</p>
<section id="apache-http-server">
<span id="httpserver"></span><span id="index-1"></span><h3><a class="toc-backref" href="#id12" role="doc-backlink"><span class="section-number">2.1.1. </span>Apache HTTP サーバー</a><a class="headerlink" href="#apache-http-server" title="Link to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>以下では、<code class="docutils literal notranslate"><span class="pre">qgis.demo</span></code> をあなたのサーバーの名前または IP アドレスに置き換えてください。</p>
</div>
<ol class="arabic">
<li><p>Apacheと <a class="reference external" href="https://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html">mod_fcgid</a> をインストールします：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt<span class="w"> </span>install<span class="w"> </span>apache2<span class="w"> </span>libapache2-mod-fcgid
</pre></div>
</div>
</li>
<li><p>QGIS Serverはデフォルトのウェブサイト上で実行することができますが、これ専用に以下のように <a class="reference external" href="https://httpd.apache.org/docs/2.4/vhosts">仮想ホスト</a> を設定してみましょう。</p>
<ol class="arabic">
<li><p><code class="file docutils literal notranslate"><span class="pre">/etc/apache2/sites-available</span></code> ディレクトリに、次の内容の <code class="file docutils literal notranslate"><span class="pre">qgis.demo.conf</span></code> というファイルを作ります：</p>
<div class="highlight-apacheconf notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;VirtualHost</span><span class="w"> </span><span class="s">*:80</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nb">ServerAdmin</span><span class="w"> </span>webmaster@localhost
<span class="w">  </span><span class="nb">ServerName</span><span class="w"> </span>qgis.demo

<span class="w">  </span><span class="nb">DocumentRoot</span><span class="w"> </span><span class="sx">/var/www/html</span>

<span class="w">  </span><span class="c"># Apache logs (different than QGIS Server log)</span>
<span class="w">  </span><span class="nb">ErrorLog</span><span class="w"> </span>${APACHE_LOG_DIR}/qgis.demo.error.log
<span class="w">  </span><span class="nb">CustomLog</span><span class="w"> </span>${APACHE_LOG_DIR}/qgis.demo.access.log<span class="w"> </span>combined

<span class="w">  </span><span class="c"># Longer timeout for WPS... default = 40</span>
<span class="w">  </span><span class="nb">FcgidIOTimeout</span><span class="w"> </span><span class="m">120</span>

<span class="w">  </span><span class="nb">FcgidInitialEnv</span><span class="w"> </span>LC_ALL<span class="w"> </span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="w">  </span><span class="nb">FcgidInitialEnv</span><span class="w"> </span>PYTHONIOENCODING<span class="w"> </span>UTF-8
<span class="w">  </span><span class="nb">FcgidInitialEnv</span><span class="w"> </span>LANG<span class="w"> </span><span class="s2">&quot;en_US.UTF-8&quot;</span>

<span class="w">  </span><span class="c"># QGIS log</span>
<span class="w">  </span><span class="nb">FcgidInitialEnv</span><span class="w"> </span>QGIS_SERVER_LOG_STDERR<span class="w"> </span><span class="m">1</span>
<span class="w">  </span><span class="nb">FcgidInitialEnv</span><span class="w"> </span>QGIS_SERVER_LOG_LEVEL<span class="w"> </span><span class="m">0</span>

<span class="w">  </span><span class="c"># default QGIS project</span>
<span class="w">  </span><span class="nb">SetEnv</span><span class="w"> </span>QGIS_PROJECT_FILE<span class="w"> </span><span class="sx">/home/qgis/projects/world.qgs</span>

<span class="w">  </span><span class="c"># QGIS_AUTH_DB_DIR_PATH must lead to a directory writeable by the Server&#39;s FCGI process user</span>
<span class="w">  </span><span class="nb">FcgidInitialEnv</span><span class="w"> </span>QGIS_AUTH_DB_DIR_PATH<span class="w"> </span><span class="s2">&quot;/home/qgis/qgisserverdb/&quot;</span>
<span class="w">  </span><span class="nb">FcgidInitialEnv</span><span class="w"> </span>QGIS_AUTH_PASSWORD_FILE<span class="w"> </span><span class="s2">&quot;/home/qgis/qgisserverdb/qgis-auth.db&quot;</span>

<span class="w">  </span><span class="c"># Set pg access via pg_service file</span>
<span class="w">  </span><span class="nb">SetEnv</span><span class="w"> </span>PGSERVICEFILE<span class="w"> </span><span class="sx">/home/qgis/.pg_service.conf</span>
<span class="w">  </span><span class="nb">FcgidInitialEnv</span><span class="w"> </span>PGPASSFILE<span class="w"> </span><span class="s2">&quot;/home/qgis/.pgpass&quot;</span>

<span class="w">  </span><span class="c"># if qgis-server is installed from packages in debian based distros this is usually /usr/lib/cgi-bin/</span>
<span class="w">  </span><span class="c"># run &quot;locate qgis_mapserv.fcgi&quot; if you don&#39;t know where qgis_mapserv.fcgi is</span>
<span class="w">  </span><span class="nb">ScriptAlias</span><span class="w"> </span><span class="sx">/cgi-bin/</span><span class="w"> </span><span class="sx">/usr/lib/cgi-bin/</span>
<span class="w">  </span><span class="nt">&lt;Directory</span><span class="w"> </span><span class="s">&quot;/usr/lib/cgi-bin/&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">AllowOverride</span><span class="w"> </span><span class="k">None</span>
<span class="w">    </span><span class="nb">Options</span><span class="w"> </span>+ExecCGI<span class="w"> </span>-MultiViews<span class="w"> </span>-SymLinksIfOwnerMatch
<span class="w">    </span><span class="nb">Require</span><span class="w"> </span><span class="k">all</span><span class="w"> </span>granted
<span class="w">  </span><span class="nt">&lt;/Directory&gt;</span>

<span class="w">  </span><span class="nt">&lt;IfModule</span><span class="w"> </span><span class="s">mod_fcgid.c</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nb">FcgidMaxRequestLen</span><span class="w"> </span><span class="m">26214400</span>
<span class="w">  </span><span class="nb">FcgidConnectTimeout</span><span class="w"> </span><span class="m">60</span>
<span class="w">  </span><span class="nt">&lt;/IfModule&gt;</span>

<span class="nt">&lt;/VirtualHost&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>上記の設定オプションのいくつかは、サーバの <a class="reference internal" href="config.html#server-env-variables"><span class="std std-ref">環境変数</span></a> と <a class="reference internal" href="../user_manual/managing_data_source/opening_data.html#pg-service-file"><span class="std std-ref">pg_service ファイル</span></a> のセクションで説明しています。</p>
</div>
</li>
<li><p>ではQGIS Server のログと認証データベースを格納するディレクトリを作成しましょう：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>/var/log/qgis/
chown<span class="w"> </span>www-data:www-data<span class="w"> </span>/var/log/qgis
mkdir<span class="w"> </span>-p<span class="w"> </span>/home/qgis/qgisserverdb
chown<span class="w"> </span>www-data:www-data<span class="w"> </span>/home/qgis/qgisserverdb
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><code class="docutils literal notranslate"><span class="pre">www-data</span></code> はDebianベースのシステムではApacheのユーザーで、Apacheがこれらの場所やファイルにアクセスできる必要があります。<code class="docutils literal notranslate"><span class="pre">chown</span> <span class="pre">www-data...</span></code> コマンドはそれぞれのディレクトリとファイルの所有者を <code class="docutils literal notranslate"><span class="pre">www-data</span></code> に変更します。</p>
</div>
</li>
</ol>
</li>
<li><p>これで、まだ有効になっていなければ、仮想ホストと``fcgid`` mod を有効にすることができます：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>a2enmod<span class="w"> </span>fcgid
a2enmod<span class="w"> </span>rewrite
a2ensite<span class="w"> </span>qgis.demo
</pre></div>
</div>
</li>
<li><p>新しい設定が反映されるようにApacheを再起動してください：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span>restart<span class="w"> </span>apache2
</pre></div>
</div>
</li>
<li><p>これでApacheは、<a class="reference external" href="http://qgis.demo">http://qgis.demo</a> へのリクエストに応答する必要があることがわかります。<cite>qgis.demo`</cite> が誰かわかるようにクライアントシステムをセットアップする必要もあります。そのためには、<a class="reference external" href="https://en.wikipedia.org/wiki/Hosts_%28file%29">hosts</a> ファイルに <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span> <span class="pre">qgis.demo</span></code> を追加します。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Replace 127.0.0.1 with the IP of your server.</span>
sh<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;echo &#39;127.0.0.1 qgis.demo&#39; &gt;&gt; /etc/hosts&quot;</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition important">
<p class="admonition-title">重要</p>
<p><code class="file docutils literal notranslate"><span class="pre">qgis.demo.conf</span></code> と <code class="file docutils literal notranslate"><span class="pre">/etc/hosts</span></code> ファイルの両方が、セットアップが機能するように設定されている必要があることを忘れないでください。<code class="file docutils literal notranslate"><span class="pre">/etc/hosts</span></code> ファイルにアクセスし、<code class="docutils literal notranslate"><span class="pre">qgis.demo</span></code> の名前をサーバーマシンがネットワーク上に持つIP（ローカルマシンからのみアクセスできるローカルIP <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code> は指定しないでください）に指定することで、ネットワーク上の他のクライアント（Windowsやmacosマシンなど）からQGIS Serverへのアクセスをテストすることもできます。。<code class="docutils literal notranslate"><span class="pre">*nix</span></code> マシンでは <code class="file docutils literal notranslate"><span class="pre">hosts</span></code> ファイルは <code class="file docutils literal notranslate"><span class="pre">/etc</span></code> にあり、Windowsでは <code class="file docutils literal notranslate"><span class="pre">C:</span></code>\Windows\System32\drivers\etc` ディレクトリの下にあります。Windowsではhostsファイルを開く前に管理者権限でテキストエディタを起動する必要があります。</p>
</div>
<p>これでQGIS Serverが <a class="reference external" href="http://qgis.demo">http://qgis.demo</a> で利用できます。確認するには、簡単には次をブラウザで入力します：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://qgis.demo/cgi-bin/qgis_mapserv.fcgi?SERVICE=WMS&amp;VERSION=1.3.0&amp;REQUEST=GetCapabilities
</pre></div>
</div>
</section>
<section id="nginx-http-server">
<span id="index-2"></span><h3><a class="toc-backref" href="#id13" role="doc-backlink"><span class="section-number">2.1.2. </span>NGINX HTTP Server</a><a class="headerlink" href="#nginx-http-server" title="Link to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>以下では、<code class="docutils literal notranslate"><span class="pre">qgis.demo</span></code> をあなたのサーバーの名前または IP アドレスに置き換えてください。</p>
</div>
<p><a class="reference external" href="https://nginx.org/en/docs/">NGINX</a> を使用して QGIS Server を使用することもできます。Apache とは異なり、NGINX は FastCGI プロセスを自動的に起動しません。FastCGI プロセスは他の何かによって起動されます。</p>
<p>NGINXをインストールする:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt<span class="w"> </span>install<span class="w"> </span>nginx
</pre></div>
</div>
<ul class="simple">
<li><p>最初の選択肢として、<strong>spawn-fcgi</strong> または <strong>fcgiwrap</strong> を使って QGIS Server プロセスを起動し、管理することができます。どちらも公式の Debian パッケージがあります。X サーバーが動作しておらず、例えば印刷が必要な場合には、 <a class="reference internal" href="#xvfb"><span class="std std-ref">xvfb</span></a> を使用することができます。</p></li>
<li><p>もう一つの選択肢は、今日ほとんどのLinuxディストリビューションが使用しているGNU/Linuxのinitシステムである <strong>Systemd</strong> に依存することです。この方法の利点の1つは、他のコンポーネントやプロセスを必要としないことです。これは、シンプルでありながら堅牢で、本番環境でのデプロイメントに効率的であることを意図しています。</p></li>
</ul>
<section id="nginx-configuration">
<h4><a class="toc-backref" href="#id14" role="doc-backlink">NGINXの設定</a><a class="headerlink" href="#nginx-configuration" title="Link to this heading"></a></h4>
<p>前の設定で使った <strong>include fastcgi_params;</strong> は、 <code class="file docutils literal notranslate"><span class="pre">/etc/nginx/fastcgi_params</span></code> からパラメータを追加するために重要です:</p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">fastcgi_param</span><span class="w">  </span><span class="s">QUERY_STRING</span><span class="w">       </span><span class="nv">$query_string</span><span class="p">;</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">REQUEST_METHOD</span><span class="w">     </span><span class="nv">$request_method</span><span class="p">;</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">CONTENT_TYPE</span><span class="w">       </span><span class="nv">$content_type</span><span class="p">;</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">CONTENT_LENGTH</span><span class="w">     </span><span class="nv">$content_length</span><span class="p">;</span>

<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">SCRIPT_NAME</span><span class="w">        </span><span class="nv">$fastcgi_script_name</span><span class="p">;</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">REQUEST_URI</span><span class="w">        </span><span class="nv">$request_uri</span><span class="p">;</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">DOCUMENT_URI</span><span class="w">       </span><span class="nv">$document_uri</span><span class="p">;</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">DOCUMENT_ROOT</span><span class="w">      </span><span class="nv">$document_root</span><span class="p">;</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">SERVER_PROTOCOL</span><span class="w">    </span><span class="nv">$server_protocol</span><span class="p">;</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">REQUEST_SCHEME</span><span class="w">     </span><span class="nv">$scheme</span><span class="p">;</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">HTTPS</span><span class="w">              </span><span class="nv">$https</span><span class="w"> </span><span class="s">if_not_empty</span><span class="p">;</span>

<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">GATEWAY_INTERFACE</span><span class="w">  </span><span class="s">CGI/1.1</span><span class="p">;</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">SERVER_SOFTWARE</span><span class="w">    </span><span class="s">nginx/</span><span class="nv">$nginx_version</span><span class="p">;</span>

<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">REMOTE_ADDR</span><span class="w">        </span><span class="nv">$remote_addr</span><span class="p">;</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">REMOTE_PORT</span><span class="w">        </span><span class="nv">$remote_port</span><span class="p">;</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">SERVER_ADDR</span><span class="w">        </span><span class="nv">$server_addr</span><span class="p">;</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">SERVER_PORT</span><span class="w">        </span><span class="nv">$server_port</span><span class="p">;</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">SERVER_NAME</span><span class="w">        </span><span class="nv">$server_name</span><span class="p">;</span>

<span class="c1"># PHP only, required if PHP was built with --enable-force-cgi-redirect</span>
<span class="k">fastcgi_param</span><span class="w">  </span><span class="s">REDIRECT_STATUS</span><span class="w">    </span><span class="mi">200</span><span class="p">;</span>
</pre></div>
</div>
<p>さらに、いくつかの <span class="xref std std-ref">qgis-server-envar</span> を使用して QGIS Server を設定することができます。NGINXの設定ファイル <code class="file docutils literal notranslate"><span class="pre">/etc/nginx/nginx.conf</span></code> では、以下のように <code class="docutils literal notranslate"><span class="pre">fastcgi_param</span></code> 命令を使ってこれらの変数を定義する必要があります：</p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">location</span><span class="w"> </span><span class="s">/qgisserver</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="kn">gzip</span><span class="w">           </span><span class="no">off</span><span class="p">;</span>
<span class="w">     </span><span class="kn">include</span><span class="w">        </span><span class="s">fastcgi_params</span><span class="p">;</span>
<span class="w">     </span><span class="kn">fastcgi_param</span><span class="w">  </span><span class="s">QGIS_SERVER_LOG_STDERR</span><span class="w">  </span><span class="mi">1</span><span class="p">;</span>
<span class="w">     </span><span class="kn">fastcgi_param</span><span class="w">  </span><span class="s">QGIS_SERVER_LOG_LEVEL</span><span class="w">   </span><span class="mi">0</span><span class="p">;</span>
<span class="w">     </span><span class="kn">fastcgi_pass</span><span class="w">   </span><span class="s">unix:/var/run/qgisserver.socket</span><span class="p">;</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="fastcgi-wrappers">
<h4><a class="toc-backref" href="#id15" role="doc-backlink">FastCGIラッパー</a><a class="headerlink" href="#fastcgi-wrappers" title="Link to this heading"></a></h4>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p><strong>fcgiwrap</strong> はすでにSystemdサービスにラップされているので、<strong>spawn-fcgi</strong> よりもセットアップが簡単です。しかし、spawn-fcgiを使用するよりもはるかに遅いソリューションになります。fcgiwrapでは、リクエストごとに新しいQGIS Serverプロセスが作成されるため、QGISプロジェクトファイルの読み込みや解析を含むQGIS Serverの初期化処理がリクエストごとに行われます。spawn-fcgiを使用すると、QGIS Serverプロセスはリクエストの間中存続するため、パフォーマンスが大幅に向上します。そのため、spawn-fcgiは実運用での使用を推奨します。</p>
</div>
<section id="spawn-fcgi">
<h5>spawn-fcgi<a class="headerlink" href="#spawn-fcgi" title="Link to this heading"></a></h5>
<p><a class="reference external" href="https://redmine.lighttpd.net/projects/spawn-fcgi/wiki">spawn-fcgi</a> を使いたい場合は:</p>
<ol class="arabic">
<li><p>最初のステップはパッケージをインストールすることです:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt<span class="w"> </span>install<span class="w"> </span>spawn-fcgi
</pre></div>
</div>
</li>
<li><p>次に以下のブロックをNGINXサーバー設定に導入します:</p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">location</span><span class="w"> </span><span class="s">/qgisserver</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">gzip</span><span class="w">           </span><span class="no">off</span><span class="p">;</span>
<span class="w">    </span><span class="kn">include</span><span class="w">        </span><span class="s">fastcgi_params</span><span class="p">;</span>
<span class="w">    </span><span class="kn">fastcgi_pass</span><span class="w">   </span><span class="s">unix:/var/run/qgisserver.socket</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>そしてNGINXを再起動して新しい設定を有効にします:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span>restart<span class="w"> </span>nginx
</pre></div>
</div>
</li>
<li><p>最後に、spawn-fcgi用のデフォルトのサービスファイルがないので、ターミナルでQGIS Serverを手動で起動する必要があります：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spawn-fcgi<span class="w"> </span>-s<span class="w"> </span>/var/run/qgisserver.socket<span class="w"> </span><span class="se">\</span>
<span class="w">                </span>-U<span class="w"> </span>www-data<span class="w"> </span>-G<span class="w"> </span>www-data<span class="w"> </span>-n<span class="w"> </span><span class="se">\</span>
<span class="w">                </span>/usr/lib/cgi-bin/qgis_mapserv.fcgi
</pre></div>
</div>
</li>
</ol>
<p>これでQGIS Serverが <a class="reference external" href="http://qgis.demo/qgisserver">http://qgis.demo/qgisserver</a> から利用できます。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>spawn-fcgiを使用する場合、サーバを実行する前に環境変数を直接定義することができます。例: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">QGIS_SERVER_LOG_STDERR=1</span></code></p>
</div>
<p>もちろん、起動時や好きな時にQGIS Serverを起動するinitスクリプトを追加することもできます。例えば、<strong>systemd</strong> を使用して：</p>
<ol class="arabic">
<li><p>この内容でファイル <code class="file docutils literal notranslate"><span class="pre">/etc/systemd/system/qgis-server.service</span></code> を編集します:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Unit]</span>
<span class="na">Description</span><span class="o">=</span><span class="s">QGIS server</span>
<span class="na">After</span><span class="o">=</span><span class="s">network.target</span>

<span class="k">[Service]</span>
<span class="c1">;; set env var as needed</span>
<span class="c1">;Environment=&quot;LANG=en_EN.UTF-8&quot;</span>
<span class="c1">;Environment=&quot;QGIS_SERVER_PARALLEL_RENDERING=1&quot;</span>
<span class="c1">;Environment=&quot;QGIS_SERVER_MAX_THREADS=12&quot;</span>
<span class="c1">;Environment=&quot;QGIS_SERVER_LOG_LEVEL=0&quot;</span>
<span class="c1">;Environment=&quot;QGIS_SERVER_LOG_STDERR=1&quot;</span>
<span class="c1">;; or use a file:</span>
<span class="c1">;EnvironmentFile=/etc/qgis-server/env</span>

<span class="na">ExecStart</span><span class="o">=</span><span class="s">spawn-fcgi -s /var/run/qgisserver.socket -U www-data -G www-data -n /usr/lib/cgi-bin/qgis_mapserv.fcgi</span>

<span class="k">[Install]</span>
<span class="na">WantedBy</span><span class="o">=</span><span class="s">multi-user.target</span>
</pre></div>
</div>
</li>
<li><p>次にこのサービスを有効にして起動します:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>qgis-server
</pre></div>
</div>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>spawn-fcgiは、上のコマンドでQGIS Serverプロセスをひとつだけ起動します。</p>
</div>
</section>
<section id="fcgiwrap">
<h5>fcgiwrap<a class="headerlink" href="#fcgiwrap" title="Link to this heading"></a></h5>
<p><a class="reference external" href="https://www.nginx.com/resources/wiki/start/topics/examples/fcgiwrap/">fcgiwrap</a> を使うのは <strong>spawn-fcgi</strong> を設定するよりとても簡単ですが、ずっと遅いです。</p>
<ol class="arabic">
<li><p>まず、対応するパッケージをインストールする必要があります:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt<span class="w"> </span>install<span class="w"> </span>fcgiwrap
</pre></div>
</div>
</li>
<li><p>次に以下のブロックをNGINXサーバー設定に導入します:</p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w"> </span><span class="k">location</span><span class="w"> </span><span class="s">/qgisserver</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">2</span><span class="w">     </span><span class="kn">gzip</span><span class="w">           </span><span class="no">off</span><span class="p">;</span>
<span class="linenos">3</span><span class="w">     </span><span class="kn">include</span><span class="w">        </span><span class="s">fastcgi_params</span><span class="p">;</span>
<span class="linenos">4</span><span class="w">     </span><span class="kn">fastcgi_pass</span><span class="w">   </span><span class="s">unix:/var/run/fcgiwrap.socket</span><span class="p">;</span>
<span class="linenos">5</span><span class="w">     </span><span class="kn">fastcgi_param</span><span class="w">  </span><span class="s">SCRIPT_FILENAME</span><span class="w"> </span><span class="s">/usr/lib/cgi-bin/qgis_mapserv.fcgi</span><span class="p">;</span>
<span class="linenos">6</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>最後に NGINX と <strong>fcgiwrap</strong> を再起動し、新しい設定を反映させます:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span>restart<span class="w"> </span>nginx
systemctl<span class="w"> </span>restart<span class="w"> </span>fcgiwrap
</pre></div>
</div>
</li>
</ol>
<p>これでQGIS Serverが <a class="reference external" href="http://qgis.demo/qgisserver">http://qgis.demo/qgisserver</a> から利用できます。</p>
</section>
</section>
<section id="systemd">
<h4><a class="toc-backref" href="#id16" role="doc-backlink">Systemd</a><a class="headerlink" href="#systemd" title="Link to this heading"></a></h4>
<p>QGIS Serverを完全に使うには、特に印刷のために、X Serverが動作している必要があります。すでにX Serverが動作している場合は、systemdサービスを使うことができます。</p>
<p>This method, to deploy QGIS Server, relies on two Systemd units to configure:
a <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/latest/systemd.socket.html">Socket unit</a>
and a <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/latest/systemd.service.html">Service unit</a>.</p>
<ol class="arabic">
<li><p><strong>QGIS Server Socketユニット</strong> は、NGINXがQGIS Serverを起動して通信するために使用するファイルシステムソケットを定義して作成します。ソケットユニットは <code class="docutils literal notranslate"><span class="pre">Accept=false</span></code> で設定する必要があります。これは <code class="docutils literal notranslate"><span class="pre">accept()</span></code> システムコールの呼び出しがサービスユニットによって作成されたプロセスに委譲されることを意味します。ソケットユニットは <code class="file docutils literal notranslate"><span class="pre">/etc/systemd/system/qgis-server&#64;.socket</span></code> にあり、これは実際にはテンプレートです：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Unit]</span>
<span class="na">Description</span><span class="o">=</span><span class="s">QGIS Server Listen Socket (instance %i)</span>

<span class="k">[Socket]</span>
<span class="na">Accept</span><span class="o">=</span><span class="s">false</span>
<span class="na">ListenStream</span><span class="o">=</span><span class="s">/var/run/qgis-server-%i.sock</span>
<span class="na">SocketUser</span><span class="o">=</span><span class="s">www-data</span>
<span class="na">SocketGroup</span><span class="o">=</span><span class="s">www-data</span>
<span class="na">SocketMode</span><span class="o">=</span><span class="s">0600</span>

<span class="k">[Install]</span>
<span class="na">WantedBy</span><span class="o">=</span><span class="s">sockets.target</span>
</pre></div>
</div>
</li>
<li><p>ソケットを有効にして起動します：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>qgis-server@<span class="nv">$i</span>.socket<span class="p">;</span><span class="w"> </span><span class="k">done</span>
</pre></div>
</div>
</li>
<li><p><strong>QGIS Server Serviceユニット</strong> はQGIS Serverプロセスを定義し、起動します。重要なのは、Serviceプロセスの標準入力がSocketユニットによって定義されたソケットに接続されていることです。これは <code class="file docutils literal notranslate"><span class="pre">/etc/systemd/system/qgis-server&#64;.service</span></code> にあるサービスユニットの設定で <code class="docutils literal notranslate"><span class="pre">StandardInput=socket</span></code> を使用して設定する必要があります:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Unit]</span>
<span class="na">Description</span><span class="o">=</span><span class="s">QGIS Server Service (instance %i)</span>

<span class="k">[Service]</span>
<span class="na">User</span><span class="o">=</span><span class="s">www-data</span>
<span class="na">Group</span><span class="o">=</span><span class="s">www-data</span>
<span class="na">StandardOutput</span><span class="o">=</span><span class="s">null</span>
<span class="na">StandardError</span><span class="o">=</span><span class="s">journal</span>
<span class="na">StandardInput</span><span class="o">=</span><span class="s">socket</span>
<span class="na">ExecStart</span><span class="o">=</span><span class="s">/usr/lib/cgi-bin/qgis_mapserv.fcgi</span>
<span class="na">EnvironmentFile</span><span class="o">=</span><span class="s">/etc/qgis-server/env</span>

<span class="k">[Install]</span>
<span class="na">WantedBy</span><span class="o">=</span><span class="s">multi-user.target</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>QGIS Server <a class="reference internal" href="config.html#qgis-server-envvar"><span class="std std-ref">環境変数</span></a> は別のファイル <code class="file docutils literal notranslate"><span class="pre">/etc/qgis-server/env</span></code> で定義されます。以下のようになります：</p>
<div class="highlight-make notranslate"><div class="highlight"><pre><span></span><span class="nv">QGIS_PROJECT_FILE</span><span class="o">=</span>/etc/qgis/myproject.qgs
<span class="nv">QGIS_SERVER_LOG_STDERR</span><span class="o">=</span><span class="m">1</span>
<span class="nv">QGIS_SERVER_LOG_LEVEL</span><span class="o">=</span><span class="m">3</span>
</pre></div>
</div>
</div>
</li>
<li><p>ソケットサービスを開始します：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>qgis-server@<span class="nv">$i</span>.service<span class="p">;</span><span class="w"> </span><span class="k">done</span>
</pre></div>
</div>
</li>
<li><p>最後に、NGINX HTTPサーバーの設定を紹介します：</p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">upstream</span><span class="w"> </span><span class="s">qgis-server_backend</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="kn">server</span><span class="w"> </span><span class="s">unix:/var/run/qgis-server-1.sock</span><span class="p">;</span>
<span class="w">   </span><span class="kn">server</span><span class="w"> </span><span class="s">unix:/var/run/qgis-server-2.sock</span><span class="p">;</span>
<span class="w">   </span><span class="kn">server</span><span class="w"> </span><span class="s">unix:/var/run/qgis-server-3.sock</span><span class="p">;</span>
<span class="w">   </span><span class="kn">server</span><span class="w"> </span><span class="s">unix:/var/run/qgis-server-4.sock</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="kn">…</span>

<span class="w">   </span><span class="s">location</span><span class="w"> </span><span class="s">/qgis-server</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="kn">gzip</span><span class="w"> </span><span class="no">off</span><span class="p">;</span>
<span class="w">       </span><span class="kn">include</span><span class="w"> </span><span class="s">fastcgi_params</span><span class="p">;</span>
<span class="w">       </span><span class="kn">fastcgi_pass</span><span class="w"> </span><span class="s">qgis-server_backend</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>新しい設定が反映されるようにNGINXを再起動します：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span>restart<span class="w"> </span>nginx
</pre></div>
</div>
</li>
</ol>
<p><a class="reference external" href="https://oslandia.com/en/2018/11/23/deploying-qgis-server-with-systemd/">チュートリアル</a> を共有してくれたOslandiaに感謝します。</p>
</section>
</section>
<section id="xvfb">
<span id="id4"></span><h3><a class="toc-backref" href="#id17" role="doc-backlink"><span class="section-number">2.1.3. </span>Xvfb</a><a class="headerlink" href="#xvfb" title="Link to this heading"></a></h3>
<p>QGIS Serverを完全に使用するためには、特に印刷のためにX Serverが動作している必要があります。サーバー上では通常インストールしないことを推奨しますので、 <code class="docutils literal notranslate"><span class="pre">xvfb</span></code> を使って仮想 X 環境を構築してください。</p>
<p>サーバをグラフィック/X11環境で動作させている場合は、xvfbをインストールする必要はありません。詳細はhttps://www.itopen.it/qgis-server-setup-notes/ 。</p>
<ol class="arabic">
<li><p>パッケージをインストールする:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt<span class="w"> </span>install<span class="w"> </span>xvfb
</pre></div>
</div>
</li>
<li><p>この内容でサービスファイル <code class="file docutils literal notranslate"><span class="pre">/etc/systemd/system/xvfb.service</span></code> を作ります:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Unit]</span>
<span class="na">Description</span><span class="o">=</span><span class="s">X Virtual Frame Buffer Service</span>
<span class="na">After</span><span class="o">=</span><span class="s">network.target</span>

<span class="k">[Service]</span>
<span class="na">ExecStart</span><span class="o">=</span><span class="s">/usr/bin/Xvfb :99 -screen 0 1024x768x24 -ac +extension GLX +render -noreset</span>

<span class="k">[Install]</span>
<span class="na">WantedBy</span><span class="o">=</span><span class="s">multi-user.target</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">xvfb.service</span></code> の状態を有効にし、開始し、チェックします：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>xvfb.service
systemctl<span class="w"> </span>status<span class="w"> </span>xvfb.service
</pre></div>
</div>
</li>
<li><p>その後、HTTPサーバーに応じて、<strong>DISPLAY</strong> パラメーターを設定するか、直接 <strong>xvfb-run</strong> を使います。</p>
<ul>
<li><p>Apacheを使う:</p>
<ol class="arabic">
<li><p><em>Fcgid</em> 設定に追加します (<a class="reference internal" href="#httpserver"><span class="std std-ref">Apache HTTP サーバー</span></a> を参照)：</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">FcgidInitialEnv</span><span class="w"> </span>DISPLAY<span class="w">       </span><span class="s2">&quot;:99&quot;</span>
</pre></div>
</div>
</li>
<li><p>新しい設定が反映されるように Apache を再起動します：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span>restart<span class="w"> </span>apache2
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>NGINXを使う</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">xvfb-run</span></code> を使った spawn-fcgi を実行する：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>xvfb-run<span class="w"> </span>/usr/bin/spawn-fcgi<span class="w"> </span>-f<span class="w"> </span>/usr/lib/cgi-bin/qgis_mapserv.fcgi<span class="w"> </span><span class="se">\</span>
<span class="w">                             </span>-s<span class="w"> </span>/tmp/qgisserver.socket<span class="w"> </span><span class="se">\</span>
<span class="w">                             </span>-G<span class="w"> </span>www-data<span class="w"> </span>-U<span class="w"> </span>www-data<span class="w"> </span>-n
</pre></div>
</div>
</li>
<li><p>HTTPサーバー設定の <strong>DISPLAY</strong> 環境変数を使用します。</p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">fastcgi_param</span><span class="w">  </span><span class="s">DISPLAY</span><span class="w">       </span><span class="s">&quot;:99&quot;</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
</ol>
</section>
</section>
<section id="installation-on-windows">
<h2><a class="toc-backref" href="#id18" role="doc-backlink"><span class="section-number">2.2. </span>Windowsへのインストール</a><a class="headerlink" href="#installation-on-windows" title="Link to this heading"></a></h2>
<p id="index-3">QGIS Server can also be installed on Windows systems using
the OSGeo4W network installer (<a class="reference external" href="https://qgis.org/resources/installation-guide/#windows">https://qgis.org/resources/installation-guide/#windows</a>).</p>
<p>簡単な手順は以下の通りです：</p>
<ol class="arabic">
<li><p>OSGeo4Wインストーラーをダウンロードして実行する</p></li>
<li><p>&quot;Advanced Install&quot;に従い、<strong>QGIS Desktop</strong>, <strong>QGIS Server</strong> <strong>apache</strong>, <strong>mod_fcgid</strong> パッケージをインストールします。</p>
<figure class="align-center">
<img alt="../../_images/qgis_server_windows2.png" src="../../_images/qgis_server_windows2.png" />
</figure>
</li>
<li><p>Apache は Windows ではサービスとして直接インストールされません。次が必要です：</p>
<ol class="arabic">
<li><p>Right-click the <code class="file docutils literal notranslate"><span class="pre">OSGeo4W.bat</span></code> file at the root of the <code class="file docutils literal notranslate"><span class="pre">C:\OSGeo4W\</span></code>
folder (if the default installation paths have been used) and select
<span class="guilabel">Run as administrator</span></p></li>
<li><p>コンソールで、<code class="docutils literal notranslate"><span class="pre">apache-install.bat</span></code> を実行し、次が出力されます</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>apache-install.bat
Installing<span class="w"> </span>the<span class="w"> </span><span class="s1">&#39;Apache OSGeo4W Web Server&#39;</span><span class="w"> </span>service
The<span class="w"> </span><span class="s1">&#39;Apache OSGeo4W Web Server&#39;</span><span class="w"> </span>service<span class="w"> </span>is<span class="w"> </span>successfully<span class="w"> </span>installed.
Testing<span class="w"> </span>httpd.conf....
Errors<span class="w"> </span>reported<span class="w"> </span>here<span class="w"> </span>must<span class="w"> </span>be<span class="w"> </span>corrected<span class="w"> </span>before<span class="w"> </span>the<span class="w"> </span>service<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>started.
...
</pre></div>
</div>
<p>レポートにあるようにサービスは開始されています。しかし、カスタム設定がないため、サーバーの実行に失敗する可能性があります。</p>
</li>
</ol>
</li>
<li><p>Edit the <code class="file docutils literal notranslate"><span class="pre">C:\OSGeo4w\apps\apache\conf\httpd.conf</span></code> file
with the following changes (various other combinations are possible):</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>目的</p></th>
<th class="head"><p>既存のconfig</p></th>
<th class="head"><p>置換</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>(オプション）IPやポートを使ってリッスンするアドレスをカスタマイズします。エントリーはいくつでも追加できます。</p></td>
<td><div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">Listen</span><span class="w"> </span>${SRVPORT}
</pre></div>
</div>
</td>
<td><div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">Listen</span><span class="w"> </span>localhost:8080
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>スクリプトファイルのある場所を示します</p></td>
<td><div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">ScriptAlias</span><span class="w"> </span><span class="sx">/cgi-bin/</span><span class="w"> </span><span class="s2">&quot;${SRVROOT}/cgi-bin/&quot;</span>
</pre></div>
</div>
</td>
<td><div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">ScriptAlias</span><span class="w"> </span><span class="sx">/cgi-bin/</span><span class="w"> </span><span class="s2">&quot;C:/OSGeo4W/apps/qgis/bin/&quot;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>スクリプトフォルダーに許可を与えます</p></td>
<td><div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Directory</span><span class="w"> </span><span class="s">&quot;${SRVROOT}/cgi-bin&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">AllowOverride</span><span class="w"> </span><span class="k">None</span>
<span class="w">    </span><span class="nb">Options</span><span class="w"> </span><span class="k">None</span>
<span class="w">    </span><span class="nb">Require</span><span class="w"> </span><span class="k">all</span><span class="w"> </span>granted
<span class="nt">&lt;/Directory&gt;</span>
</pre></div>
</div>
</td>
<td><div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Directory</span><span class="w"> </span><span class="s">&quot;C:/OSGeo4W/apps/qgis/bin&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">SetHandler</span><span class="w"> </span>cgi-script
<span class="w">    </span><span class="nb">AllowOverride</span><span class="w"> </span><span class="k">None</span>
<span class="w">    </span><span class="nb">Options</span><span class="w"> </span>ExecCGI
<span class="w">    </span><span class="nb">Require</span><span class="w"> </span><span class="k">all</span><span class="w"> </span>granted
<span class="nt">&lt;/Directory&gt;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>スクリプトファイルに使うために拡張を有効にします。アンコメントして完成させます</p></td>
<td><div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="c">#AddHandler cgi-script .cgi</span>
</pre></div>
</div>
</td>
<td><div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">AddHandler</span><span class="w"> </span>cgi-script<span class="w"> </span>.cgi<span class="w"> </span>.exe
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>さらにOSGeo4Wカスタム設定変数を加えます</p></td>
<td><div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="c"># parse OSGeo4W apache conf files</span>
<span class="nb">IncludeOptional</span><span class="w"> </span><span class="s2">&quot;C:/OSGeo4W/httpd.d/httpd_*.conf&quot;</span>
</pre></div>
</div>
</td>
<td><div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="c"># parse OSGeo4W apache conf files</span>
<span class="nb">IncludeOptional</span><span class="w"> </span><span class="s2">&quot;C:/OSGeo4W/httpd.d/httpd_*.conf&quot;</span>
<span class="nb">SetEnv</span><span class="w"> </span>GDAL_DATA<span class="w"> </span><span class="s2">&quot;C:/OSGeo4W/share/gdal&quot;</span>
<span class="nb">SetEnv</span><span class="w"> </span>QGIS_AUTH_DB_DIR_PATH<span class="w"> </span><span class="s2">&quot;C:/OSGeo4W/apps/qgis/resources&quot;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p>Apacheウェブサーバーを再起動します</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">apache</span><span class="o">-</span><span class="n">restart</span><span class="o">.</span><span class="n">bat</span>
</pre></div>
</div>
</li>
<li><p>ブラウザウィンドウを開き、QGIS ServerへのGetCapabilitiesリクエストをテストします。<code class="docutils literal notranslate"><span class="pre">localhost:8080</span></code> をリッスンするように設定したIPとポートに置き換えてください。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://localhost:8080/cgi-bin/qgis_mapserv.fcgi.exe?SERVICE=WMS&amp;VERSION=1.3.0&amp;REQUEST=GetCapabilities
</pre></div>
</div>
<p>機能が :file:<a href="#id1"><span class="problematic" id="id2">`</span></a>XML`ファイルで返されるはずです。これでサーバを使用する準備が整いました。</p>
</li>
</ol>
</section>
<section id="serve-a-project">
<h2><a class="toc-backref" href="#id19" role="doc-backlink"><span class="section-number">2.3. </span>プロジェクトを供給する</a><a class="headerlink" href="#serve-a-project" title="Link to this heading"></a></h2>
<p>これでQGIS Serverがインストールされ、稼働しているので、あとは使うだけです。</p>
<p>言うまでもありませんが、作業にはQGISプロジェクトが必要です。もちろん、連絡先情報を定義したり、CRSに正確な制限を加えたり、あるいはいくつかのレイヤを除外したりして、プロジェクトを完全にカスタマイズすることもできます。これについては <a class="reference internal" href="#creatingwmsfromproject"><span class="std std-ref">プロジェクトを設定する</span></a> で後述します。</p>
<p>ただしここでは、上で説明したように、既に設定され、ダウンロードされている <code class="file docutils literal notranslate"><span class="pre">/home/qgis/projects/world.qgs</span></code> にある簡単なプロジェクトを使うことにします。</p>
<p>プロジェクトを開き、レイヤをざっと見てみると、4つのレイヤが利用できることが分かります：</p>
<ul class="simple">
<li><p>airports</p></li>
<li><p>places</p></li>
<li><p>countries</p></li>
<li><p>countries_shapeburst</p></li>
</ul>
<p>今のところ、完全なリクエストを理解する必要はありませんが、ウェブブラウザで次のように <em>countries</em> レイヤを取得することで、QGIS Serverのおかげで前のレイヤのいくつかを含むマップを取得することができます：</p>
<ul>
<li><p>上記の手順に従ってApache HTTP Serverをインストールした場合：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>http://qgis.demo/cgi-bin/qgis_mapserv.fcgi?MAP<span class="o">=</span>/home/qgis/projects/world.qgs<span class="p">&amp;</span><span class="nv">LAYERS</span><span class="o">=</span>countries<span class="p">&amp;</span><span class="nv">SERVICE</span><span class="o">=</span>WMS<span class="p">&amp;</span><span class="nv">VERSION</span><span class="o">=</span><span class="m">1</span>.3.0<span class="p">&amp;</span><span class="nv">REQUEST</span><span class="o">=</span>GetMap<span class="p">&amp;</span><span class="nv">CRS</span><span class="o">=</span>EPSG:4326<span class="p">&amp;</span><span class="nv">WIDTH</span><span class="o">=</span><span class="m">400</span><span class="p">&amp;</span><span class="nv">HEIGHT</span><span class="o">=</span><span class="m">200</span><span class="p">&amp;</span><span class="nv">BBOX</span><span class="o">=</span>-90,-180,90,180
</pre></div>
</div>
</li>
<li><p>上記の手順に従ってNGINX HTTPサーバーをインストールした場合：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>http://qgis.demo/qgisserver?MAP<span class="o">=</span>/home/qgis/projects/world.qgs<span class="p">&amp;</span><span class="nv">LAYERS</span><span class="o">=</span>countries<span class="p">&amp;</span><span class="nv">SERVICE</span><span class="o">=</span>WMS<span class="p">&amp;</span><span class="nv">VERSION</span><span class="o">=</span><span class="m">1</span>.3.0<span class="p">&amp;</span><span class="nv">REQUEST</span><span class="o">=</span>GetMap<span class="p">&amp;</span><span class="nv">CRS</span><span class="o">=</span>EPSG:4326<span class="p">&amp;</span><span class="nv">WIDTH</span><span class="o">=</span><span class="m">400</span><span class="p">&amp;</span><span class="nv">HEIGHT</span><span class="o">=</span><span class="m">200</span><span class="p">&amp;</span><span class="nv">BBOX</span><span class="o">=</span>-90,-180,90,180
</pre></div>
</div>
</li>
</ul>
<p>次の画像が表示されれば、QGIS Serverは正しく動作しています：</p>
<figure class="align-center" id="id5">
<img alt="../../_images/server_basic_getmap.png" src="../../_images/server_basic_getmap.png" />
<figcaption>
<p><span class="caption-number">図 2.2 </span><span class="caption-text">基本 GetMap リクエストに対するサーバーの応答</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>なお、<strong>MAP</strong> パラメータを与える代わりに、<strong>QGIS_PROJECT_FILE</strong> 環境変数を定義して、デフォルトでプロジェクトを使用することもできます (<span class="xref std std-ref">qgis-server-envar</span> を参照)。</p>
<p>spawn-fcgi を使う例：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">QGIS_PROJECT_FILE</span><span class="o">=</span>/home/qgis/projects/world.qgs
spawn-fcgi<span class="w"> </span>-f<span class="w"> </span>/usr/lib/bin/cgi-bin/qgis_mapserv.fcgi<span class="w"> </span><span class="se">\</span>
<span class="w">           </span>-s<span class="w"> </span>/var/run/qgisserver.socket<span class="w"> </span><span class="se">\</span>
<span class="w">           </span>-U<span class="w"> </span>www-data<span class="w"> </span>-G<span class="w"> </span>www-data<span class="w"> </span>-n
</pre></div>
</div>
</section>
<section id="configure-your-project">
<span id="creatingwmsfromproject"></span><h2><a class="toc-backref" href="#id20" role="doc-backlink"><span class="section-number">2.4. </span>プロジェクトを設定する</a><a class="headerlink" href="#configure-your-project" title="Link to this heading"></a></h2>
<p>To provide a new QGIS Server WMS, WFS, OAPIF or WCS, you have to create a QGIS project
file with some data or use one of your current projects. Define the colors and
styles of the layers in QGIS and the project CRS, if not already defined.
Then, go to the <span class="guilabel">QGIS Server</span> menu of the
<span class="menuselection">Project ► Properties...</span> dialog and provide
some information about the OWS in the <span class="guilabel">Service Capabilities</span> tab.</p>
<figure class="align-center" id="id6">
<span id="figure-server-definitions"></span><img alt="../../_images/ows_server_definition.png" src="../../_images/ows_server_definition.png" />
<figcaption>
<p><span class="caption-number">図 2.3 </span><span class="caption-text">QGISサーバーのWMS / WFS / WCSプロジェクトの定義</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>サービス機能が無効になっている場合は、最初に <span class="guilabel">Service Capabilitiesを有効化</span> する必要があります。これはWMS、WFS、WCSのGetCapabilitiesレスポンスに表示されます。<a class="reference internal" href="../../_images/checkbox.png"><img alt="checkbox" src="../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Service Capabilitiesを有効化</span> にチェックを入れない場合、QGIS Serverは <code class="file docutils literal notranslate"><span class="pre">cgi-bin</span></code> フォルダにある <code class="file docutils literal notranslate"><span class="pre">wms_metadata.xml</span></code> ファイルにある情報を使用します。</p>
<section id="wms-capabilities">
<h3><a class="toc-backref" href="#id21" role="doc-backlink"><span class="section-number">2.4.1. </span>WMS機能</a><a class="headerlink" href="#wms-capabilities" title="Link to this heading"></a></h3>
<figure class="align-center" id="id7">
<span id="figure-wms-definitions"></span><img alt="../../_images/ows_server_wms.png" src="../../_images/ows_server_wms.png" />
<figcaption>
<p><span class="caption-number">図 2.4 </span><span class="caption-text">WMSタブにある定義</span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>In the <span class="guilabel">WMS</span> tab, you can define the options for the WMS capabilities.</p>
<ul class="simple">
<li><p>Check <span class="guilabel">Advertised extent</span>
to define the extent advertised in the WMS GetCapabilities response.
The <a class="reference internal" href="../user_manual/introduction/general_tools.html#extent-selector"><span class="std std-ref">spatial extent selector</span></a> widget helps you enter the extent
as a <code class="docutils literal notranslate"><span class="pre">xmin,</span> <span class="pre">xmax,</span> <span class="pre">ymin,</span> <span class="pre">ymax</span></code> text or pick it from the map canvas, layers, bookmarks...</p></li>
</ul>
<ul id="restricted-crs">
<li><p>By checking <a class="reference internal" href="../../_images/checkbox.png"><img alt="checkbox" src="../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">CRS restrictions</span>, you can restrict
in which coordinate reference systems (CRS) QGIS Server will offer
to render maps. It is recommended that you restrict the offered CRS as this
reduces the size of the WMS GetCapabilities response.
Use the <a class="reference internal" href="../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> button below to select those CRSs
from the Coordinate Reference System Selector, or click <span class="guilabel">Used</span>
to add the CRSs used in the QGIS project to the list.</p></li>
<li><p>プロジェクトで印刷レイアウトが定義されている場合、それらは <code class="docutils literal notranslate"><span class="pre">GetProjectSettings</span></code> レスポンスにリストされ、GetPrint リクエストで印刷レイアウトのいずれかをテンプレートとして使用して印刷を作成することができます。これはWMS 1.3.0仕様に対するQGIS固有の拡張です。WMSによって公開される印刷レイアウトを除外したい場合は、チェックボックス| <span class="guilabel">レイアウトの除外</span> をチェックし、下の <a class="reference internal" href="../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> ボタンをクリックします。次に、除外レイアウトリストに追加するために、 <span class="guilabel">印刷レイアウトの選択</span> ダイアログから印刷レイアウトを選択します。</p></li>
<li><p>WMSからレイヤまたはレイヤーグループを除外したい場合は、<a class="reference internal" href="../../_images/checkbox.png"><img alt="checkbox" src="../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">レイヤの除外</span> をチェックし、下の <a class="reference internal" href="../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> ボタンをクリックします。これにより <span class="guilabel">制限されたレイヤとグループを選択する</span> ダイアログが開き、公開したくないレイヤとグループを選択することができます。複数のエントリを選択したい場合は <kbd class="kbd docutils literal notranslate">Shift</kbd> キーまたは <kbd class="kbd docutils literal notranslate">Ctrl</kbd> キーを使用してください。WMSのGetCapabilitiesレスポンスのサイズが小さくなり、クライアント側のロード時間が短縮されるため、不要なレイヤは公開しないことをお勧めします。</p></li>
<li><p><span class="guilabel">Layer and Feature Options</span></p>
<p>要求された GetFeatureInfo は、平文テキスト、XML、および GML で受け取ることができます。デフォルトは XML です。</p>
<ul>
<li><p><a class="reference internal" href="../../_images/checkbox.png"><img alt="checkbox" src="../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">レイヤIDを名前に使う</span> をチェックすると、 <code class="docutils literal notranslate"><span class="pre">GetCapabilities</span></code> レスポンスや <code class="docutils literal notranslate"><span class="pre">GetMap</span> <span class="pre">LAYERS</span></code> パラメータでレイヤを参照する際にレイヤ ID が使用されます。そうでない場合は、レイヤの名前、または定義されている場合は、短い名前 (ref:<cite>vectorservermenu</cite> を参照) が使用されます。</p>
<p>By default, layer names are used to expose layers through WMS.
If multiple layers have the same name, they will be merged to a single WMS layer
and cannot be requested individually.
You need to take care of these layers being compatible with each other.
Using the <span class="guilabel">Use layer ids as name</span> option ensures that multiple layers
with the same name can be requested as individual layers.</p>
</li>
</ul>
<ul class="simple" id="addgeometrytofeatureresponse">
<li><p>必要であれば、<a class="reference internal" href="../../_images/checkbox.png"><img alt="checkbox" src="../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">地物情報の応答にWKTジオメトリを加える</span> をチェックします。これにより、各地物のバウンディングボックスが GetFeatureInfo レスポンスに含まれます。ref:<a href="#id1"><span class="problematic" id="id2">`</span></a>WITH_GEOMETRY ` パラメータも参照してください。</p></li>
<li><p>多くの Web クライアントはジオメトリの円弧を表示できないため、GetFeatureInfo レスポンスでクライアントに送信する前にジオメトリをセグメント化するオプションがあります。これにより、そのようなクライアントでも地物のジオメトリを表示することができます（例 地物のハイライト表示）。このオプションを有効にするには、 <a class="reference internal" href="../../_images/checkbox.png"><img alt="checkbox" src="../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">地物情報ジオメトリをセグメント化</span> をチェックする必要があります。</p></li>
<li><p>また、<span class="guilabel">GetFeatureInfoジオメトリ精度</span> オプションを使用して、GetFeatureInfo ジオメトリの精度を設定することもできます。これにより、完全な精度を必要としない場合に帯域幅を節約することができます。</p></li>
<li><p>レイヤーの一つが <a class="reference internal" href="../user_manual/working_with_vector/vector_properties.html#maptips"><span class="std std-ref">地図ヒントディスプレイ</span></a> を使用している場合（つまり式を使ってテキストを表示するために）これはGetFeatureInfo出力内で表示されます。レイヤーは、その属性のいずれかの値マップを使用している場合は、この情報には、GetFeatureInfo出力に表示されます。</p></li>
<li><p>WMS GetCapabilitiesレスポンスでQGIS Serverに特定のリクエストURLを広告させたい場合は、<span class="guilabel">公開URL</span> フィールドに対応するURLを入力します。</p></li>
</ul>
</li>
<li><p><span class="guilabel">Map and Legend Options</span></p>
<ul class="simple">
<li><p>When a layer group is passed to <code class="docutils literal notranslate"><span class="pre">GetLegendGraphic</span></code> request,
all of its leaf layers are added to the legend picture (however without the groups' labels).
Check the <a class="reference internal" href="../../_images/checkbox.png"><img alt="checkbox" src="../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Add layer groups in GetLegendGraphic</span> option
if you want to also insert the layer groups (and subgroups) names
into the layer tree, just like in QGIS Desktop legend.</p></li>
<li><p>When QGIS project contains layer groups, they are listed in WMS capabilities document alongside with layers.
If a group (its name as listed in capabilities) is included in WMS GetMap <code class="docutils literal notranslate"><span class="pre">LAYERS</span></code> parameter
alongside with names of layers in that group, QGIS would duplicate the layers:
once for the group and once for specific layer.
If you check the <a class="reference internal" href="../../_images/checkbox.png"><img alt="checkbox" src="../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Skip name attribute for groups</span> option,
GetCapabilities will only return title attribute for the group but not its name attribute,
making it impossible to include groups in list of layers of GetMap request.</p></li>
<li><p>Furthermore, you can restrict the maximum size of the maps returned by the requests
by entering the maximum width and height into the respective fields
under <span class="guilabel">Maximum image size for GetMap and GetLegendGraphic requests</span>.</p></li>
<li><p>You can change the <span class="guilabel">Quality for JPEG and WebP images</span> factor.
The quality factor must be in the range 0 to 100.
Specify 0 for maximum compression, 100 for no compression.</p></li>
<li><p><span class="guilabel">地図帳印刷する地物数の上限</span> フィールドを設定することで、1回のリクエストで印刷する地図帳地物の上限を変更することができます。</p></li>
<li><p>QGIS Serverをタイルモードで使用する場合（<a class="reference internal" href="services/wms.html#wms-tiled"><span class="std std-ref">TILEDパラメータ</span></a> を参照）、<span class="guilabel">タイルのバッファ（ピクセル）</span> を設定することができます。推奨値は、QGISプロジェクトで最大のシンボルまたは線幅の大きさです。</p></li>
<li><p>Depending on whether the map uses a projected CRS or a geographic CRS
and if there is no information to evaluate the map unit sized symbols,
you can provide reference for size through either a <span class="guilabel">Default scale for legend</span>
or <span class="guilabel">Default map units per mm in legend</span>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="wmts-capabilities">
<h3><a class="toc-backref" href="#id22" role="doc-backlink"><span class="section-number">2.4.2. </span>WMTS機能</a><a class="headerlink" href="#wmts-capabilities" title="Link to this heading"></a></h3>
<p>In the <span class="guilabel">WMTS</span> tab you can select the layers you want to publish as WMTS
and specify if you want to publish as PNG or JPEG.</p>
<p>Under <span class="guilabel">Grids</span>, for each <a class="reference internal" href="#restricted-crs"><span class="std std-ref">restricted CRS</span></a>,
you can indicate whether the tile matrices should be published
and configure their top-left corner, minimum and maximum scales
and the last level of the tile matrices.
Note that for <code class="docutils literal notranslate"><span class="pre">EPSG:3857</span></code> and <code class="docutils literal notranslate"><span class="pre">EPSG:4326</span></code> CRS, only the last level of the tile matrices can be edited.</p>
<p>You can also set a <span class="guilabel">Minimum scale</span> for the tiles display.</p>
<p>If you enter a URL in the <span class="guilabel">Advertised URL</span> field,
QGIS Server will advertise this specific URL in the WMTS GetCapabilities response.</p>
<figure class="align-center" id="id8">
<span id="figure-wmts-definitions"></span><img alt="../../_images/ows_server_wmts.png" src="../../_images/ows_server_wmts.png" />
<figcaption>
<p><span class="caption-number">図 2.5 </span><span class="caption-text">WMTSタブにある定義</span><a class="headerlink" href="#id8" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="wfs-oapif-capabilities">
<h3><a class="toc-backref" href="#id23" role="doc-backlink"><span class="section-number">2.4.3. </span>WFS/OAPIF機能</a><a class="headerlink" href="#wfs-oapif-capabilities" title="Link to this heading"></a></h3>
<p>In the <span class="guilabel">WFS/OAPIF</span> tab, you can select the layers you
want to publish as WFS or OAPIF, and specify if they will allow update, insert and
delete operations.</p>
<figure class="align-center" id="id9">
<span id="figure-wfs-definitions"></span><img alt="../../_images/ows_server_wfs.png" src="../../_images/ows_server_wfs.png" />
<figcaption>
<p><span class="caption-number">図 2.6 </span><span class="caption-text">WFS/OAPIFタブにある定義</span><a class="headerlink" href="#id9" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>If you enter a URL in the <span class="guilabel">Advertised URL</span> field,
QGIS Server will advertise this specific URL in the WFS GetCapabilities response.</p>
</section>
<section id="wcs-capabilities">
<h3><a class="toc-backref" href="#id24" role="doc-backlink"><span class="section-number">2.4.4. </span>WCS機能</a><a class="headerlink" href="#wcs-capabilities" title="Link to this heading"></a></h3>
<p>In the <span class="guilabel">WCS</span> tab, you can select the layers that you want to publish as WCS.</p>
<figure class="align-center" id="id10">
<span id="figure-wcs-definitions"></span><img alt="../../_images/ows_server_wcs.png" src="../../_images/ows_server_wcs.png" />
<figcaption>
<p><span class="caption-number">図 2.7 </span><span class="caption-text">WCSタブにある定義</span><a class="headerlink" href="#id10" title="Link to this image"></a></p>
</figcaption>
</figure>
<p><span class="guilabel">WCS機能</span> セクションの <span class="guilabel">公開URL</span> フィールドにURLを入力すると、QGIS ServerはWCS GetCapabilitiesレスポンスでこの特定のURLを広告します。</p>
</section>
<section id="fine-tuning-your-ows">
<h3><a class="toc-backref" href="#id25" role="doc-backlink"><span class="section-number">2.4.5. </span>OWSを微調整する</a><a class="headerlink" href="#fine-tuning-your-ows" title="Link to this heading"></a></h3>
<p>For vector layers, the <span class="guilabel">Fields</span> tab of the <span class="menuselection">Layer ►
Layer Properties</span> dialog allows you to define for each attribute if it will be published or not.
By default, all the attributes are published by your WMS and WFS.
If you don't want a specific attribute to be published, uncheck the appropriate
checkbox in the <span class="guilabel">Configuration</span> column:</p>
<ul class="simple">
<li><p><span class="guilabel">Do not expose in WFS</span></p></li>
<li><p><span class="guilabel">Do not expose in WMS</span></p></li>
</ul>
<p>プロジェクトファイルにテキスト注記または SVG注記を追加することで、WMS が作成したマップに透かしを重ねることができます。注記の作成方法については <a class="reference internal" href="../user_manual/map_views/map_view.html#sec-annotations"><span class="std std-ref">注記ツール</span></a> セクションを参照してください。注記をWMSの出力に透かしとして表示するには、 <span class="guilabel">注記テキスト</span> ダイアログの <span class="guilabel">地図の位置固定</span> チェックボックスのチェックを外す必要があります。このチェックボックスには、注記ツールがアクティブな状態で注記をダブルクリックすることでアクセスできます。SVG注記の場合、（ <span class="menuselection">プロジェクト ► プロパティ...</span> ダイアログの <span class="guilabel">一般情報</span> メニューで）プロジェクトを絶対パスで保存するように設定するか、SVG画像へのパスを有効な相対パスになるように手動で修正する必要があります。</p>
</section>
</section>
<section id="integration-with-third-parties">
<h2><a class="toc-backref" href="#id26" role="doc-backlink"><span class="section-number">2.5. </span>サードパーティとの統合</a><a class="headerlink" href="#integration-with-third-parties" title="Link to this heading"></a></h2>
<p>QGIS Server provides standard OGC web services like <a class="reference external" href="https://www.ogc.org/publications">WMS, WFS, etc.</a>
thus it can be used by a wide variety of end user tools.</p>
<section id="integration-with-qgis-desktop">
<h3><a class="toc-backref" href="#id27" role="doc-backlink"><span class="section-number">2.5.1. </span>QGIS Desktopとの統合</a><a class="headerlink" href="#integration-with-qgis-desktop" title="Link to this heading"></a></h3>
<p>QGIS Desktopはマップデザイナーであり、QGIS Server はマップサーバーです。マップまたは QGIS プロジェクトは、OGC 標準を提供するために QGIS Server によって提供されます。これらのQGISプロジェクトは、ファイルでもデータベース内のエントリでもかまいません（QGIS Desktopの <span class="menuselection">プロジェクト ► 保存 ► PostgreSQL</span> を使用します）。</p>
<p>さらに、QGIS Serverで使用されているプロジェクトを更新するには、専用の更新ワークフローを確立する必要があります（プロジェクトファイルをサーバーの場所にコピーし、QGIS Serverを再起動するなど）。今のところ、自動化された処理（メッセージキューサービスを介したサーバーのリロード）は実装されていません。</p>
</section>
<section id="integration-with-mapproxy">
<h3><a class="toc-backref" href="#id28" role="doc-backlink"><span class="section-number">2.5.2. </span>MapProxyとの統合</a><a class="headerlink" href="#integration-with-mapproxy" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://www.mapproxy.org/">MapProxy</a> is a tile cache server and as it can read and
serve any WMS/WMTS map server, it can be directly connected to QGIS server web
services and improve end user experience.</p>
</section>
<section id="integration-with-qwc2">
<h3><a class="toc-backref" href="#id29" role="doc-backlink"><span class="section-number">2.5.3. </span>QWC2との統合</a><a class="headerlink" href="#integration-with-qwc2" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/qgis/qwc2">QWC2</a> は QGIS Server 専用のレスポンシブ Web アプリケーションです。レイヤ選択、地物情報など、高度にカスタマイズされたマップビューアを構築するのに役立ちます。また、認証や印刷サービスのような多くのプラグインが利用可能で、完全なリストはこの <a class="reference external" href="https://github.com/qwc-services">リポジトリ</a> にあります。</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="1. はじめに" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="services.html" class="btn btn-neutral float-right" title="3. サービス" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2002-now, QGIS project.
      <span class="lastupdated">最終更新: 2025 7月 17, 09:46 +0900
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!-- Transifex follows a particular logic to build target pages:
Expected French translation link for https://docs.qgis.org/3.28/en/docs/user_manual/print_composer/overview_composer.html
would return https://app.transifex.com/qgis/qgis-documentation/translate/#fr/aa6d8bc653526d38b295ca94bf8eee5e
with the md5 value of "github#qgis/QGIS-Documentation#release_3.28#locale/en/LC_MESSAGES/docs/user_manual/print_composer/overview_composer.po"-->
<!--Make sure that mismatching language codes between Transifex and Sphinx are converted-->


  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-info-circle"> QGIS Documentation </span>
      v: 3.40
      <span class="fa fa-caret-down"></span>
    </span>

    <div class="rst-other-versions">
      <dl>
        <dt>Languages</dt>
        
          <dd><a href="https://docs.qgis.org/3.40/en/docs/server_manual/getting_started.html">en</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/cs/docs/server_manual/getting_started.html">cs</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/de/docs/server_manual/getting_started.html">de</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/es/docs/server_manual/getting_started.html">es</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/fr/docs/server_manual/getting_started.html">fr</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/hu/docs/server_manual/getting_started.html">hu</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/it/docs/server_manual/getting_started.html">it</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/ja/docs/server_manual/getting_started.html">ja</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/ko/docs/server_manual/getting_started.html">ko</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/lt/docs/server_manual/getting_started.html">lt</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/nl/docs/server_manual/getting_started.html">nl</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/pl/docs/server_manual/getting_started.html">pl</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/pt_BR/docs/server_manual/getting_started.html">pt_BR</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/pt_PT/docs/server_manual/getting_started.html">pt_PT</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/ro/docs/server_manual/getting_started.html">ro</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/ru/docs/server_manual/getting_started.html">ru</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/zh_Hans/docs/server_manual/getting_started.html">zh_Hans</a></dd>
        
      </dl>

      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.qgis.org/testing/ja/docs/server_manual/getting_started.html">testing</a></dd>
        
          <dd><a href="https://docs.qgis.org/latest/ja/docs/server_manual/getting_started.html">latest</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/ja/docs/server_manual/getting_started.html">3.40</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ja/docs/server_manual/getting_started.html">3.34</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.28/ja/docs/server_manual/getting_started.html">3.28</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.22/ja/docs/server_manual/getting_started.html">3.22</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.16/ja/docs/server_manual/getting_started.html">3.16</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.10/ja/docs/server_manual/getting_started.html">3.10</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.4/ja/docs/server_manual/getting_started.html">3.4</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.18/ja/docs/server_manual/getting_started.html">2.18</a></dd>
        
      </dl>

       
       <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://docs.qgis.org/3.40/pdf">PDF</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.40/zip">HTML</a></dd>
        
      </dl>
      

      
       
      <dl>
        <dt>Contribute to Docs</dt>
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/edit/master/docs/server_manual/getting_started.rst" target="_blank" rel="noopener noreferrer">Edit on GitHub</a>
          </dd>
          
          
          <dd>
            <a href="https://app.transifex.com/qgis/qgis-documentation/translate/#ja/8af5570d176d9dbf5bcc657eb5590b39" target="_blank" rel="noopener noreferrer">Translate Page</a>
          </dd>
          
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/issues" target="_blank" rel="noopener noreferrer">Report Issue</a>
          </dd>
      </dl>
      

      <dl>
        <dt>On QGIS Project</dt>
          <dd>
            <a href="https://qgis.org" target="_blank" rel="noopener noreferrer">Home</a>
          </dd>
          <dd>
            <a href="https://qgis.org/api/3.40" target="_blank" rel="noopener noreferrer">C++ API</a>
          </dd>
          <dd>
            <a href="https://qgis.org/pyqgis/3.40" target="_blank" rel="noopener noreferrer">PyQGIS API</a>
          </dd>
          <dd>
            <a href="https://github.com/qgis/QGIS/tree/release-3_40" target="_blank" rel="noopener noreferrer">Source</a>
          </dd>
      </dl>

    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>